<dom-module id="valo-text-field" theme-for="vaadin-text-field">
  <template>
    <style>
      :host {
        color: var(--valo-body-text-color);
        font-size: var(--valo-font-size);
        font-family: var(--valo-font-family);
        width: var(--valo-text-field-default-width, calc(var(--valo-size-m) * 5));
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        -webkit-tap-highlight-color: transparent;
      }

      [part="label"] {
        color: var(--valo-caption-text-color, var(--valo-secondary-text-color));
        font-weight: var(--valo-caption-font-weight);
        font-size: var(--valo-caption-font-size);
        margin-left: calc(var(--valo-text-field-border-radius, var(--valo-border-radius)) / 3);
        margin-bottom: var(--valo-space-xs);
        transition: color 0.4s;
        line-height: 1.333;
      }

      :host([label]) {
        margin-top: var(--valo-space-m);
        vertical-align: 2em;
      }

      :host([focused]:not([readonly])) [part="label"] {
        color: var(--valo-primary-color);
      }

      /* Used for required and invalid indicators */
      [part="label"]::after {
        content: "â€¢";
        transition: all 0.3s;
        margin-left: 0.2em;
        opacity: 0;
      }

      [part="value"] {
        -webkit-appearance: none;
        -moz-appearance: none;
        outline: none;
        margin: 0;
        border: 0;
        border-radius: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        font-family: inherit;
        font-size: 1em;
        font-weight: 500;
        color: inherit;
        background-color: transparent;

        /* Disable default invalid style in Firefox */
        box-shadow: none;
      }

      [part="value"]::-webkit-input-placeholder {
        color: var(--valo-disabled-text-color);
        transition: opacity 0.175s 0.05s;
        opacity: 1;
      }

      [part="value"]:-ms-input-placeholder {
        color: var(--valo-disabled-text-color);
      }

      [part="value"]::-moz-placeholder {
        color: var(--valo-disabled-text-color);
        transition: opacity 0.175s 0.05s;
        opacity: 1;
      }

      [part="value"]::placeholder {
        color: var(--valo-disabled-text-color);
        transition: opacity 0.175s 0.1s;
        opacity: 1;
      }

      [part="input-field"] {
        border-radius: var(--valo-text-field-border-radius, var(--valo-border-radius));
        background-color: var(--valo-text-field-background-color, var(--valo-black-10pct));
        padding: 0 calc(var(--valo-space-s) + var(--valo-text-field-border-radius, var(--valo-border-radius)) / 3);
        transition: all 0.5s;
        font-weight: var(--valo-caption-font-weight);
        position: relative;
        will-change: transform;
        height: var(--valo-size-m);
      }

      @media (hover: hover) {
        :host(:hover:not([readonly]):not([invalid]):not([focused])) [part="input-field"] {
          background-color: var(--valo-text-field-hover-background-color, var(--valo-black-20pct));
        }
      }

      :host([focused]:not([readonly])) [part="input-field"] {
        background-color: var(--valo-text-field-focused-background-color, var(--valo-white));
        box-shadow: inset 0 0 0 1px var(--valo-text-field-focused-border-color, var(--valo-black-20pct));
      }

      /* Trigger when not focusing using the keyboard */
      :host([focused]:not([focus-ring]):not([readonly])) [part="input-field"] {
        animation: focus-input-field 0.5s forwards;
      }

      @keyframes focus-input-field {
        0% {
          transform: scale(0.99);
        }
      }

      :host([focus-ring]) [part="input-field"] {
        transition-duration: 0.2s;
      }

      /* Activation effect */

      [part="input-field"]::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        border-radius: inherit;
        pointer-events: none;
        background-color: var(--valo-text-field-focused-background-color, var(--valo-white));
        opacity: 0.5;
        transform: scaleX(0);
        transition: transform 0s, opacity 0s;
        transform-origin: 0 0;
        will-change: transform;
      }

      :host([focused]:not([focus-ring]):not([readonly])) [part="input-field"]::after {
        opacity: 0;
        transform: scaleX(1);
        transition: transform 0.2s, opacity 1s;
      }

      /* Disabled style */

      :host([disabled]) {
        pointer-events: none;
      }

      :host([disabled]) [part="value"] {
        color: var(--valo-disabled-text-color);
      }

      :host([disabled]) [part="value"]::-webkit-input-placeholder {
        opacity: 0;
      }

      :host([disabled]) [part="value"]:-ms-input-placeholder {
        opacity: 0;
      }

      :host([disabled]) [part="value"]::-moz-placeholder {
        opacity: 0;
      }

      :host([disabled]) [part="value"]::placeholder {
        opacity: 0;
      }

      :host([disabled]) [part="input-field"] {
        background-color: var(--valo-text-field-disabled-background-color, var(--valo-black-20pct));
      }

      /* Required field style */

      :host([required]:not([has-value]):not([invalid])) [part="label"]::after {
        color: var(--valo-primary-color);
        opacity: 1;
      }

      /* Invalid styles and error message */

      :host([invalid]) [part="label"]::after {
        color: var(--valo-error-color);
        opacity: 1;
      }

      :host([invalid]) [part="input-field"] {
        box-shadow: inset 0 0 0 1px var(--valo-error-color-50pct),
                    inset 0 0 3px 0 var(--valo-error-color-50pct),
                    0 0 4px -1px var(--valo-error-color-50pct);
      }

      [part="error-message"] {
        margin-top: var(--valo-space-xs);
        margin-left: calc(var(--valo-text-field-border-radius, var(--valo-border-radius)) / 3);
        font-size: var(--valo-font-size-s);
        color: var(--valo-error-text-color);
        animation: reveal 0.2s;
      }

      @keyframes reveal {
        0% {
          opacity: 0;
        }
      }

      /* Small theme */

      :host([theme~="small"]) {
        --valo-font-size: 14px;
      }

      :host([theme~="small"]) [part="input-field"]{
        height: var(--valo-size-s);
      }
    </style>
  </template>
</dom-module>
