<dom-module id="material-text-field" theme-for="vaadin-text-field">
  <template>
    <style>
      :host {
        position: relative;
        width: 160px;
        margin-top: 16px;
        margin-bottom: 8px;
        color: rgba(0, 0, 0, 0.87);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;

        /* Fix Chrome’s dancing labels */
        contain: content;
      }

      :host([label]) {
        vertical-align: 24px;
      }

      [part="input-field"] {
        position: relative;
      }

      [part="input-field"]::before,
      [part="input-field"]::after {
        content: "";
        position: absolute;
        bottom: 1px;
        left: 0;
        right: 0;
        transition: all 0.25s;
        height: 1px;
        transform-origin: 50% 0%;
        background-color: #000;
        opacity: 0.42;
      }

      [part="input-field"]::after {
        background-color: #2962FF;
        opacity: 1;
        height: 2px;
        bottom: 0;
        transform: scaleX(0);
      }

      [part="value"] {
        outline: none;
        margin: 0;
        border: 0;
        border-radius: 0;
        padding: 8px 0 10px;
        width: 100%;
        height: calc(16px + 8px + 10px);
        font-family: Roboto, sans-serif;
        font-size: 16px;
        color: inherit;
        background-color: transparent;

        /* Disable default invalid style in Firefox */
        box-shadow: none;
      }

      [part="value"]::-webkit-input-placeholder {
        color: rgba(0, 0, 0, 0.38);
        transition: opacity 0.175s 0.05s;
        opacity: 1;
      }

      [part="value"]:-ms-input-placeholder {
        color: rgba(0, 0, 0, 0.38);
      }

      [part="value"]::-moz-placeholder {
        color: rgba(0, 0, 0, 0.38);
        transition: opacity 0.175s 0.05s;
        opacity: 1;
      }

      [part="value"]::placeholder {
        color: rgba(0, 0, 0, 0.42);
        transition: opacity 0.175s 0.1s;
        opacity: 1;
      }

      :host([label]:not([focused]):not([invalid]):not([theme-class="always-float-label"])) [part="value"]::-webkit-input-placeholder {
        opacity: 0;
        transition-delay: 0;
      }

      :host([label]:not([focused]):not([invalid]):not([theme-class="always-float-label"])) [part="value"]::-moz-placeholder {
        opacity: 0;
        transition-delay: 0;
      }

      :host([label]:not([focused]):not([invalid]):not([theme-class="always-float-label"])) [part="value"]::placeholder {
        opacity: 0;
        transition-delay: 0;
      }

      /* IE11 doesn’t show the placeholder when the input is focused, so it’s basically useless for this theme */
      :host([label]) [part="value"]:-ms-input-placeholder {
        opacity: 0;
      }

      [part="label"] {
        display: block;
        font-family: Roboto, sans-serif;
        font-size: 16px;
        line-height: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: rgba(0, 0, 0, 0.42);
        transform-origin: 0 50%;
        transform: scale(0.75);
        width: 133%;
        transition: transform 0.175s, color 0.175s;
      }

      :host(:hover) [part="input-field"]::before {
        /* Use a slightly reduced value so that there’s less visible blurriness during the
           transition in Safari. The end result is still acceptable on all browsers. */
        transform: scaleY(1.7);
        opacity: 0.87;
      }

      :host([focused]) [part="label"] {
        color: #2962FF;
      }

      :host([focused]) [part="input-field"]::after {
        transform: none;
      }

      :host([invalid]) [part="label"] {
        color: #FF1744;
      }

      :host([invalid]) [part="input-field"]::after {
        background-color: #FF1744;
        transform: none;
      }

      :host([disabled]) {
        color: rgba(0, 0, 0, 0.38);
        pointer-events: none;
      }

      :host([disabled]) [part="input-field"]::before {
        background-color: transparent;
        background-image: linear-gradient(90deg, #000 0, #000 2px, transparent 2px);
        background-size: 4px 1px;
        background-repeat: repeat-x;
      }

      /* Only target the actual visible, floating label */
      :host(:not([has-value]):not([focused]):not([invalid]):not([theme-class~="always-float-label"])) [part="label"] {
        /* IE11 doesn’t work with calc inside the translate function, so we need to have a fixed pixel value instead of 50% + 16px */
        transform: scale(1) translateY(24px);
        width: 100%;
        pointer-events: none;
        left: auto;
        transition-delay: 0.1s;
      }

      [part="error-message"] {
        font-size: 12px;
        line-height: 1.1;
        color: #FF1744;
        margin-top: 8px;
        animation: reveal 0.2s;
      }

      @keyframes reveal {
        0% {
          opacity: 0;
        }
      }

      :host([required]) [part="label"]::after {
        content: " *";
      }

    </style>
  </template>
</dom-module>
